<app-navbar></app-navbar>

<div class="container">
  <div class="table-responsive">
    <div class="table-wrapper">
      <div class="table-title">
        <div class="row">
          <div class="col-xs-6">
            <h2>Log Detayları</h2>
          </div>
        </div>
      </div>
      <div class="d-flex" role="search">
        <input class="form-control me-2" type="text" placeholder="Ara" [(ngModel)]="searchTerm">
        <button class="btn btn-primary" (click)="searchLogs()">Ara</button>
      </div>
      <div>
        <!--Refresh button-->
        <button class="btn btn-primary" (click)="getLogs()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
          <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg></button>
      </div>
      <div *ngIf="logs.length > 0; else noData">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th><input type="checkbox" (change)="selectAll($event)" /> Hepsini Seç</th>
              <th scope="col">Durum</th>
              <th scope="col">Kullanıcı ID</th>
              <th scope="col">İşlem Tipi</th>
              <th scope="col">Tarih/Saat</th>
              <th scope="col">Açıklama</th>
              <th scope="col">Kullanıcı Tip</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let log of logs | paginate: { itemsPerPage: 10, currentPage: page }">
              <td><input type="checkbox" [(ngModel)]="log.selected"></td>
              <td>{{ log.durum }}</td>
              <td>{{ log.kullaniciId }}</td>
              <td>{{ log.islemTip }}</td>
              <td>{{ log.tarihveSaat | date:'HH:mm, dd.MM.yyyy' }}</td>
              <td>{{ log.aciklama }}</td>
              <td>{{ log.kullaniciTip }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <pagination-controls (pageChange)="page = $event"></pagination-controls>
    </div>
    <div class="mb-3">
      <button class="btn btn-success" (click)="exportToExcel()">Export to Excel</button>
    </div>
  </div>
</div>

<ng-template #noData>
  <p>No data available.</p>
</ng-template>
